import{d as e,r as a,e as t,o,c as n,w as r,u as s,C as i,g as d,i as l,a as c,b as u,m,p as f,q as h}from"./index-3f6a7c5d.js";import{U as p}from"./index.0cb25950.js";import{_ as v}from"./plugin-vueexport-helper.1b428a4d.js";const x=v(e({name:"UQDrawBoard",setup(e,{expose:c}){let u,m="ui-draw-board-"+(1e4*Math.random()).toFixed(0),f=d(),h=a(0),v=a(0),x=a(),w=!1,_=e=>{u&&(w=!0,u.beginPath().moveTo(e.x,e.y))},b=e=>{u&&w&&(u.lineTo(e.x,e.y).stroke().draw(!0),u.moveTo(e.x,e.y))},y=e=>{u&&(w=!1,u.lineTo(e.x,e.y).stroke().draw(!0))};return t((()=>{uni.createSelectorQuery().in(f).select("#"+m).boundingClientRect((e=>{h.value=e.width,v.value=e.height,setTimeout((()=>{x.value.fetch().then((e=>{u=e.config({strokeStyle:"black",lineWidth:2})}))}),200)})).exec()})),c({toBase64:()=>new Promise(((e,a)=>{u?u.toDataURL().then((a=>{e(a)})):a("canvas init failed!")}))}),(e,a)=>{const t=l;return o(),n(t,{class:"draw-board-container",id:s(m)},{default:r((()=>[0!=s(h)&&0!=s(v)?(o(),n(p,{key:0,onStart:s(_),onMove:s(b),onEnd:s(y),ref_key:"canvasRef",ref:x,width:s(h),height:s(v)},null,8,["onStart","onMove","onEnd","width","height"])):i("",!0)])),_:1},8,["id"])}}}),[["__scopeId","data-v-d292fd86"]]),w=v(e({__name:"index",setup(e){let t=a(),i=()=>{t.value.toBase64().then((e=>{console.log(e)})).catch((e=>{}))};return(e,a)=>{const d=m(f("ui-draw-board"),x),p=l,v=h;return o(),n(p,{class:"example-container"},{default:r((()=>[c(p,{class:"view"},{default:r((()=>[c(d,{ref_key:"mydrawBoardRef",ref:t},null,512)])),_:1}),c(v,{class:"example-btnbottom",type:"primary",onClick:s(i)},{default:r((()=>[u(" 获取base64 ")])),_:1},8,["onClick"])])),_:1})}}}),[["__scopeId","data-v-9c699bb0"]]);export{w as default};
