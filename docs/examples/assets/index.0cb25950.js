import{d as t,r as i,o as e,c as n,w as r,a as o,u as s,x as a,k as _,g as h,O as u,i as l}from"./index-3f6a7c5d.js";import{_ as p}from"./plugin-vueexport-helper.1b428a4d.js";var c={exports:{}},f=c.exports=function(){var t=function(){function t(t){void 0===t&&(t=.5),this.name="Hermite",this.__u=t}return t.prototype.setP=function(t,i,e,n,r,o){if(!(t<e))throw new Error("The point x-position should be increamented!");this.__a=t,this.__b=e;var s=this.__u*r,a=this.__u*o;return i/=e-t,n/=e-t,this.__MR=[2*i-2*n+s+a,3*n-3*i-2*s-a,s,i],this},t.prototype.use=function(t){if(this.__MR){var i=(t-this.__a)/(this.__b-this.__a),e=i*i;return(i*e*this.__MR[0]+e*this.__MR[1]+i*this.__MR[2]+this.__MR[3])*(this.__b-this.__a)}throw new Error("You shoud first set the position!")},t}(),i=function(){function i(t){void 0===t&&(t=0),this.name="Cardinal",this.__t=t}return i.prototype.setP=function(i){this.__HS={x:[],h:[]};var e,n,r=(i[1][1]-i[0][1])/(i[1][0]-i[0][0]);for(this.__HS.x[0]=i[0][0],e=1;e<i.length;e++){if(i[e][0]<=i[e-1][0])throw new Error("The point position should be increamented!");this.__HS.x[e]=i[e][0],n=e<i.length-1?i[e+1][1]>i[e][1]&&i[e-1][1]>i[e][1]||i[e+1][1]<i[e][1]&&i[e-1][1]<i[e][1]||i[e+1][1]==i[e][1]||i[e-1][1]==i[e][1]?0:(i[e+1][1]-i[e-1][1])/(i[e+1][0]-i[e-1][0]):(i[e][1]-i[e-1][1])/(i[e][0]-i[e-1][0]),this.__HS.h[e-1]=new t(.5*(1-this.__t)).setP(i[e-1][0],i[e-1][1],i[e][0],i[e][1],r,n),r=n}return this},i.prototype.use=function(t){if(this.__HS){for(this.__i=-1;this.__i+1<this.__HS.x.length&&(t>this.__HS.x[this.__i+1]||-1==this.__i&&t>=this.__HS.x[this.__i+1]);)this.__i+=1;return this.__i<0?this.__HS.h[0].use(this.__HS.x[0]):this.__i>=this.__HS.h.length?this.__HS.h[this.__HS.h.length-1].use(this.__HS.x[this.__HS.x.length-1]):this.__HS.h[this.__i].use(t)}throw new Error("You shoud first set the position!")},i}(),e=function(t,i){for(var e=[],n=0;n<4;n++)for(var r=0;r<i.length/4;r++)e[4*r+n]=t[n]*i[4*r]+t[n+4]*i[4*r+1]+t[n+8]*i[4*r+2]+t[n+12]*i[4*r+3];return e},n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r=function(){function t(t){void 0===t&&(t=n),this.name="Matrix4",this.__matrix4=t}return t.prototype.setValue=function(t){return void 0===t&&(t=n),this.__matrix4=t,this},t.prototype.move=function(t,i,n,r){return void 0===r&&(r=0),this.__matrix4=e(function(t,i,e,n){void 0===n&&(n=0);var r=Math.sqrt(i*i+e*e+n*n);return[1,0,0,0,0,1,0,0,0,0,1,0,i*t/r,e*t/r,n*t/r,1]}(t,i,n,r),this.__matrix4),this},t.prototype.rotate=function(t,i,n,r,o,s,a){var _,h,u,l=function(t,i,e,n,r,o){if("number"==typeof t&&"number"==typeof i){if("number"!=typeof e?(e=0,n=t,r=i,o=1):"number"==typeof n&&"number"==typeof r&&"number"==typeof o||(n=t,r=i,o=e,t=0,i=0,e=0),t==n&&i==r&&e==o)throw new Error("It's not a legitimate ray!");var s=Math.sqrt((n-t)*(n-t)+(r-i)*(r-i)),a=0!=s?(r-i)/s:1,_=0!=s?(n-t)/s:0,h=(n-t)*_+(r-i)*a,u=o-e,l=Math.sqrt(h*h+u*u),p=0!=l?u/l:1,c=0!=l?h/l:0;return[[a,p*_,_*c,0,-_,a*p,a*c,0,0,-c,p,0,i*_-t*a,e*c-t*_*p-i*a*p,-t*_*c-i*a*c-e*p,1],[a,-_,0,0,p*_,p*a,-c,0,_*c,a*c,p,0,t,i,e,1]]}throw new Error("a1 and b1 is required!")}(i,n,r,o,s,a);return this.__matrix4=e(e(e(l[1],(_=t,h=Math.sin(_),[u=Math.cos(_),h,0,0,-h,u,0,0,0,0,1,0,0,0,0,1])),l[0]),this.__matrix4),this},t.prototype.scale=function(t,i,n,r,o,s){return void 0===r&&(r=0),void 0===o&&(o=0),void 0===s&&(s=0),this.__matrix4=e((void 0===(u=r)&&(u=0),void 0===(l=o)&&(l=0),void 0===(p=s)&&(p=0),[a=t,0,0,0,0,_=i,0,0,0,0,h=n,0,u-u*a,l-l*_,p-p*h,1]),this.__matrix4),this;var a,_,h,u,l,p},t.prototype.multiply=function(t,i){return void 0===i&&(i=!1),this.__matrix4=i?e(this.__matrix4,t):e(t,this.__matrix4),this},t.prototype.use=function(t,i,n,r){return void 0===n&&(n=0),void 0===r&&(r=1),e(this.__matrix4,[t,i,n,r])},t.prototype.value=function(){return this.__matrix4},t}();function o(t,i,e,n,r){var o=Math.cos(e),s=Math.sin(e);return[(n-t)*o-(r-i)*s+t,(n-t)*s+(r-i)*o+i]}
/*!
        * animation of OIPage v1.3.0
        * git+https://github.com/oi-contrib/OIPage.git
        */var s,a=[];function _(t,i,e){arguments.length<2&&(i=400),arguments.length<3&&(e=function(){});var n={timer:function(t,i,e){if(!t)throw new Error("Tick is required!");var r=(new Date).valueOf()+"_"+(1e3*Math.random()).toFixed(0);return a.push({id:r,createTime:new Date,tick:t,duration:i,callback:e}),n.start(),r},start:function(){s||(s=setInterval(n.tick,13))},tick:function(){var t,i,e,r,o,s,_,h=a;for((a=[]).length=0,i=0;i<h.length;i++)t=(o=h[i]).createTime,e=o.tick,s=o.duration,r=o.callback,e(_=(_=(+(new Date).valueOf()-t.valueOf())/s)>1?1:_),_<1&&o.id?a.push(o):r(_);a.length<=0&&n.stop()},stop:function(){s&&(clearInterval(s),s=null)}},r=n.timer((function(i){t(i)}),i,e);return{stop:function(){var t;for(t in a)if(a[t].id==r)return void(a[t].id=void 0)}}}function h(t,i,e,n){if(t<i){var r=i;i=t,t=r}else if(t==i)return[t];var o=function(t){for(var i=t<100&&t>-100?10:.1,e=-1,n=t;10==i?n>=-100&&n<=100:n<=-100||n>=100;)e+=1,n*=i;if(10==i)return Math.pow(10,e);for(var r="0.",o=1;o<e;o++)r+="0";return+(r+"1")}(t-i),s=Math.ceil((t-i)*o/e),a=function(e){var n=({3:2,4:5,6:5,7:5,8:10,9:10,11:10,12:10,13:15,14:15,16:15,17:15,18:20,19:20,21:20,22:20,23:25,24:25,26:25,27:25}[s+e]||s+e)/o,r=Math.floor(i/n)*n,a=[];a.push(r);for(var _=1;a[a.length-1]<t;_++)a.push(r+n*_);return a},_=a(0),h=function(){for(var t=[],e=_[_.length-1]-(null==n?void 0:n.max),r=0;r<_.length;r++)r+1<_.length&&_[r+1]-e<i||t.push(_[r]-e);return t},u=function(){for(var i=[],e=_[0]-(null==n?void 0:n.min),r=0;r<_.length&&(i[r]=_[r]-e,!(t<=i[r]));r++);return i};if(n){if("max"in n&&"min"in n&&n.max>=t&&n.min<=i){var l=function(){if(_[0]>=n.min&&_[_.length-1]<=n.max)return!0;var t=h();if(t[0]>=n.min&&t[t.length-1]<=n.max)return _=t,!0;var i=u();return i[0]>=n.min&&i[t.length-1]<=n.max?(_=i,!0):void 0};if(l())return _;for(var p=1;p<100;p++){if(_=a(p),l())return _;if(_=a(-p),l())return _}}"max"in n&&n.max>=t?n.max<_[_.length-1]&&(_=h()):"min"in n&&n.min<=i&&n.min>_[0]&&(_=u())}for(var c=0;c<_.length;c++){var f=_[c]+"";/\./.test(f)&&(/9{7,}$/.test(f)?(f=f.replace(/9{7,}$/,""),_[c]=+(f.substring(0,f.length-1)+(+f[f.length-1]+1))):/0{7,}\d$/.test(f)&&(_[c]=+f.replace(/0{7,}\d$/,"")))}return _}var u=function(t,i){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])})(t,i)};function l(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=t}u(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}var p=function(){return p=Object.assign||function(t){for(var i,e=1,n=arguments.length;e<n;e++)for(var r in i=arguments[e])Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r]);return t},p.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var c=["href","title","show","type","role","actuate"],f=function(t,i){v(t,"stroke-dasharray",i.lineDash.join(",")),v(t,"stroke-width",i.lineWidth+""),v(t,"stroke-linecap",i.lineCap+""),v(t,"stroke-linejoin",i.lineJoin+"")};function d(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}var g=function(t,i,e){c.indexOf(i)>-1?t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:"+i,e+""):t.setAttribute(i,e+"")},v=g;function y(t,i){f(t,i),g(t,"stroke",i.strokeStyle),g(t,"fill",i.fillStyle)}function m(t,i){g(t,"fill",i.fillStyle)}function w(t,i){f(t,i),g(t,"stroke",i.strokeStyle),g(t,"fill","none")}var x=function(t,i,e,n,r){var o=Math.cos(e),s=Math.sin(e);return[+((n-t)*o-(r-i)*s+t).toFixed(7),+((n-t)*s+(r-i)*o+i).toFixed(7)]};function E(t,i,e,n,r,o,s){i<0&&(t+=i,i*=-1);var a,_=[];a=x(0,0,t,r,0),_[0]=a[0],_[1]=a[1],a=x(0,0,i,a[0],a[1]),_[2]=a[0],_[3]=a[1],a=x(0,0,t,o,0),_[4]=a[0],_[5]=a[1],a=x(0,0,i,a[0],a[1]),_[6]=a[0],_[7]=a[1],s(t,t+i,_[0]+e,_[1]+n,_[4]+e,_[5]+n,_[2]+e,_[3]+n,_[6]+e,_[7]+n,.5*(o-r))}var b=function(t){var i=t.getElementsByTagName("defs");if(i.length<=0){var e=d("defs");return t.appendChild(e),e}return i[0]},P=function(t,i,e,n,r){if("text"!==t.nodeName.toLowerCase())throw new Error("Need a <text> !");v(t,"dy",{top:.5*i.fontSize,middle:0,bottom:.5*-i.fontSize}[i.textBaseline]),function(t,i){for(var e in i)t.style[e]=i[e]}(t,{"text-anchor":{left:"start",right:"end",center:"middle"}[i.textAlign],"dominant-baseline":"central","font-size":i.fontSize+"px","font-family":i.fontFamily}),v(t,"x",e),v(t,"y",n),"number"==typeof r&&v(t,"transform","rotate("+(r%=360)+","+e+","+n+")")},T=function(t,i,e,n){if("circle"!==t.nodeName.toLowerCase())throw new Error("Need a <circle> !");v(t,"cx",i),v(t,"cy",e),v(t,"r",n)},C=function(t,i){if("path"!==t.nodeName.toLowerCase())throw new Error("Need a <path> !");v(t,"d",i)},R=function(t,i,e,n,r,o){if("path"!==t.nodeName.toLowerCase())throw new Error("Need a <path> !");var s=[];if(Array.isArray(i.rectRadius)&&i.rectRadius.length>0)for(var a=0;a<4;a++)s.push.apply(s,i.rectRadius);o<0&&(n-=o*=-1),r<0&&(e-=r*=-1);var _="";s.length>=4?(_="M"+(e+s[0])+" "+n,_+="L"+(e+r-s[1])+" "+n,_+="A"+s[1]+" "+s[1]+" 0 0 1 "+(e+r)+" "+(n+s[1]),_+="L"+(e+r)+" "+(n+o-s[2]),_+="A"+s[2]+" "+s[2]+" 0 0 1 "+(e+r-s[2])+" "+(n+o),_+="L"+(e+s[3])+" "+(n+o),_+="A"+s[3]+" "+s[3]+" 0 0 1 "+e+" "+(n+o-s[3]),_+="L"+e+" "+(n+s[0]),_+="A"+s[0]+" "+s[0]+" 0 0 1 "+(e+s[0])+" "+n):(_="M"+e+" "+n,_+="L"+(e+r)+" "+n,_+="L"+(e+r)+" "+(n+o),_+="L"+e+" "+(n+o),_+="Z"),v(t,"d",_)},M=function(t,i,e,n,r,o,s,a){if("path"!==t.nodeName.toLowerCase())throw new Error("Need a <path> !");if(s=s/180*Math.PI,a=a/180*Math.PI,s%=2*Math.PI,r>o){var _=r;r=o,o=_}a>=1.999999*Math.PI||a<=1.999999*-Math.PI?a=1.999999*Math.PI:a%=2*Math.PI,E(s,a,e,n,r,o,(function(e,n,s,a,_,h,u,l,p,c,f){var d=n-e>Math.PI?1:0,g="M"+s+" "+a;f<0&&(f=-f),g+="A"+r+" "+r+" 0 "+d+" 1 "+u+" "+l,"round"==i.arcEndCap?g+="A"+f+" "+f+"  0 1 0 "+p+" "+c:"-round"==i.arcEndCap?g+="A"+f+" "+f+"  0 1 1 "+p+" "+c:g+="L"+p+" "+c,g+="A"+o+" "+o+" 0 "+d+" 0 "+_+" "+h,"round"==i.arcStartCap?g+="A"+f+" "+f+"  0 1 0 "+s+" "+a:"-round"==i.arcStartCap?g+="A"+f+" "+f+"  0 1 1 "+s+" "+a:g+="L"+s+" "+a,"butt"==i.arcStartCap&&(g+="Z"),v(t,"d",g)}))},S=function(t,i){var e={value:function(){return"url(#"+i+")"},setColor:function(i,n){var r=d("stop");return t.appendChild(r),v(r,"offset",100*i+"%"),v(r,"style","stop-color:"+n+";"),e}};return e},A=function(t){function i(i){var e=this;if(!i)throw new Error("VISLite SVG:The mount point requires an HTMLElement type but encountered null.");var n=i.clientWidth,r=i.clientHeight,o=document.createElementNS("http://www.w3.org/2000/svg","svg");return i.appendChild(o),o.setAttribute("width",n+""),o.setAttribute("height",r+""),o.setAttribute("viewBox","0 0 "+n+" "+r),(e=t.call(this,o)||this).__el=i,e}return l(i,t),i.prototype.toDataURL=function(){var t=this;return new Promise((function(i){var e=t.__el.clientWidth,n=t.__el.clientHeight,r=document.createElement("img");r.setAttribute("width",e+""),r.setAttribute("height",n+"");var o="data:image/svg+xml;charset=utf-8,<svg xmlns='http://www.w3.org/2000/svg' width='"+e+"' height='"+n+"'>"+t.__svg.innerHTML.replace(/"/g,"'")+"</svg>";r.setAttribute("src",o),setTimeout((function(){var t=document.createElement("canvas");t.setAttribute("width",e+""),t.setAttribute("height",n+"");var o=t.getContext("2d");o&&o.drawImage(r,0,0,e,n),i(t.toDataURL())}),100)}))},i}(function(){function t(t){this.name="SVG",this.__config={fillStyle:"rgb(0,0,0)",strokeStyle:"rgb(0,0,0)",textAlign:"left",textBaseline:"middle",fontSize:16,fontFamily:"sans-serif",arcStartCap:"butt",arcEndCap:"butt",lineDash:[],lineWidth:1,lineCap:"butt",lineJoin:"miter",rectRadius:[]},this.__path="",this.__currentPosition=[],this.__svg=t}return t.prototype.config=function(t){if("object"!=typeof t)return this.__config[t];for(var i in t)this.__config[i]=t[i];return this},t.prototype.reset=function(){return this.config({fillStyle:"rgb(0,0,0)",strokeStyle:"rgb(0,0,0)",textAlign:"left",textBaseline:"middle",fontSize:16,fontFamily:"sans-serif",arcStartCap:"butt",arcEndCap:"butt",lineDash:[],lineWidth:1,lineCap:"butt",lineJoin:"miter",rectRadius:[]}),this},t.prototype.useEl=function(t){return this.__useEl=t,this},t.prototype.getEl=function(){return this.__useEl},t.prototype.appendEl=function(t,i){return i=i||this.__svg,"string"==typeof t&&(t=d(t)),i.appendChild(t),this.__useEl=t,this},t.prototype.appendBoard=function(t,i){var e=t;if("string"==typeof t&&(e={text:"text",path:"path",arc:"path",circle:"circle",rect:"rect"}[t]||""),""==e)throw new Error("Unsupported drawing method:"+t);return this.appendEl(e,i)},t.prototype.remove=function(){if(!this.__useEl)throw new Error("Currently, no node can be deleted.");return this.__useEl.parentNode.removeChild(this.__useEl),this},t.prototype.attr=function(t){if(!this.__useEl)throw new Error("Currently, no node can be modified or viewed.");if("object"!=typeof t)return i=this.__useEl,e=t,c.indexOf(e)>-1&&(e="xlink:"+e),i.getAttribute(e);var i,e;for(var n in t)v(this.__useEl,n,t[n]);return this},t.prototype.fillText=function(t,i,e,n){return void 0===n&&(n=0),P(this.__useEl,this.__config,i,e,n),this.__useEl.textContent=t,m(this.__useEl,this.__config),this},t.prototype.strokeText=function(t,i,e,n){return void 0===n&&(n=0),P(this.__useEl,this.__config,i,e,n),this.__useEl.textContent=t,w(this.__useEl,this.__config),this},t.prototype.fullText=function(t,i,e,n){return void 0===n&&(n=0),P(this.__useEl,this.__config,i,e,n),this.__useEl.textContent=t,y(this.__useEl,this.__config),this},t.prototype.fillArc=function(t,i,e,n,r,o){return M(this.__useEl,this.__config,t,i,e,n,r,o),m(this.__useEl,this.__config),this},t.prototype.strokeArc=function(t,i,e,n,r,o){return M(this.__useEl,this.__config,t,i,e,n,r,o),w(this.__useEl,this.__config),this},t.prototype.fullArc=function(t,i,e,n,r,o){return M(this.__useEl,this.__config,t,i,e,n,r,o),y(this.__useEl,this.__config),this},t.prototype.fillCircle=function(t,i,e){return T(this.__useEl,t,i,e),m(this.__useEl,this.__config),this},t.prototype.strokeCircle=function(t,i,e){return T(this.__useEl,t,i,e),w(this.__useEl,this.__config),this},t.prototype.fullCircle=function(t,i,e){return T(this.__useEl,t,i,e),y(this.__useEl,this.__config),this},t.prototype.fillRect=function(t,i,e,n){return R(this.__useEl,this.__config,t,i,e,n),m(this.__useEl,this.__config),this},t.prototype.strokeRect=function(t,i,e,n){return R(this.__useEl,this.__config,t,i,e,n),w(this.__useEl,this.__config),this},t.prototype.fullRect=function(t,i,e,n){return R(this.__useEl,this.__config,t,i,e,n),y(this.__useEl,this.__config),this},t.prototype.beginPath=function(){return this.__currentPosition=[],this.__path="",this},t.prototype.closePath=function(){return this.__path+="Z",this},t.prototype.moveTo=function(t,i){return this.__currentPosition=[t,i],this.__path+="M"+t+" "+i,this},t.prototype.lineTo=function(t,i){return this.__currentPosition=[t,i],this.__path+=(""==this.__path?"M":"L")+t+" "+i,this},t.prototype.fill=function(){return C(this.__useEl,this.__path),m(this.__useEl,this.__config),this},t.prototype.stroke=function(){return C(this.__useEl,this.__path),w(this.__useEl,this.__config),this},t.prototype.full=function(){return C(this.__useEl,this.__path),y(this.__useEl,this.__config),this},t.prototype.arc=function(t,i,e,n,r){var s=o(t,i,n/180*Math.PI,t+e,i),a=o(t,i,(n+r)/180*Math.PI,t+e,i);return""==this.__path?this.__path+="M"+s[0]+","+s[1]:s[0]==this.__currentPosition[0]&&s[1]==this.__currentPosition[1]||(this.__path+="L"+s[0]+","+s[1]),this.__path+="A"+e+","+e+" 0 "+(r>180||r<-180?1:0)+","+(r>0?1:0)+" "+a[0]+","+a[1],this},t.prototype.quadraticCurveTo=function(t,i,e,n){return this.__path+="Q"+t+" "+i+","+e+" "+n,this},t.prototype.bezierCurveTo=function(t,i,e,n,r,o){return this.__path+="C"+t+" "+i+","+e+" "+n+","+r+" "+o,this},t.prototype.bind=function(t,i){return this.__useEl.addEventListener(t,(function(t){i.call(this,t,this)}),!1),this},t.prototype.createLinearGradient=function(t,i,e,n){return r=this.__svg,o=t,s=i,a=e,_=n,h=b(r),u="visliteLg"+(new Date).valueOf()+(1e6*Math.random()).toFixed(0),l=d("linearGradient"),h.appendChild(l),v(l,"id",u),v(l,"x1",o+"%"),v(l,"y1",s+"%"),v(l,"x2",a+"%"),v(l,"y2",_+"%"),S(l,u);var r,o,s,a,_,h,u,l},t.prototype.createRadialGradient=function(t,i,e){return n=this.__svg,r=t,o=i,s=e,a=b(n),_="visliteRg"+(new Date).valueOf()+(1e6*Math.random()).toFixed(0),h=d("radialGradient"),a.appendChild(h),v(h,"id",_),v(h,"cx",r+"%"),v(h,"cy",o+"%"),v(h,"r",s+"%"),S(h,_);var n,r,o,s,a,_,h},t}()),I=function(t,i,e,n,r){return t.beginPath(),t.translate(e,n),t.rotate(r),t.font=i.fontStyle+" "+i.fontWeight+" "+i.fontSize+"px "+i.fontFamily,t},k=function(t,i,e,n,r,o,s,a){if(r>o){var _=r;r=o,o=_}return s%=2*Math.PI,a>=1.999999*Math.PI||a<=1.999999*-Math.PI?a=2*Math.PI:a%=2*Math.PI,E(s,a,e,n,r,o,(function(s,a,_,h,u,l,p,c,f,d,g){g<0&&(g=-g),t.beginPath(),t.moveTo(_,h),t.arc(e,n,r,s,a,!1),"round"==i.arcEndCap?t.arc(.5*(p+f),.5*(c+d),g,a-Math.PI,a,!0):"-round"==i.arcEndCap?t.arc(.5*(p+f),.5*(c+d),g,a-Math.PI,a,!1):t.lineTo(f,d),t.arc(e,n,o,a,s,!0),"round"==i.arcStartCap?t.arc(.5*(_+u),.5*(h+l),g,s,s-Math.PI,!0):"-round"==i.arcStartCap?t.arc(.5*(_+u),.5*(h+l),g,s,s-Math.PI,!1):t.lineTo(_,h)})),"butt"==i.arcStartCap&&t.closePath(),t},L=function(t,i,e,n){return t.beginPath(),t.moveTo(i+n,e),t.arc(i,e,n,0,2*Math.PI),t},O=function(t,i,e,n,r,o){t.beginPath();var s=[];if(Array.isArray(i.rectRadius)&&i.rectRadius.length>0)for(var a=0;a<4;a++)s.push.apply(s,i.rectRadius);return s.length>=4?(t.arc(e+s[0],n+s[0],s[0],Math.PI,1.5*Math.PI),t.arc(e+r-s[1],n+s[1],s[1],1.5*Math.PI,0),t.arc(e+r-s[2],n+o-s[2],s[2],0,.5*Math.PI),t.arc(e+s[3],n+o-s[3],s[3],.5*Math.PI,Math.PI),t.closePath()):t.rect(e,n,r,o),t};function V(t,i,e,n,r){for(var o=0,s="",a=0;a<i.length;a++)t.measureText(s+i[a]).width>e||/\n$/.test(s)?(r(s,((o+=1)-.5)*n),s=i[a]):a==i.length-1?(o+=1,r(s+i[a],(o-.5)*n)):s+=i[a];return o*n}function U(t){var i={fontSize:16,fontFamily:"sans-serif",fontWeight:400,fontStyle:"normal",arcStartCap:"butt",arcEndCap:"butt",rectRadius:[]},e={fillStyle:"black",strokeStyle:"black",lineWidth:1,lineCap:"butt",lineJoin:"miter",lineDash:[],textAlign:"left",textBaseline:"middle",shadowBlur:0,shadowColor:"black"};return"special"==t?i:"init"==t?e:p(p({},i),e)}var B=function(){function t(t,i,e,n,r){void 0===i&&(i={}),void 0===n&&(n=!1),this.__region=null,this.__onlyRegion=!1,this.__onlyView=!1,this.__specialConfig=U("special"),this.__initConfig=U("init"),this.painter=t.getContext("2d",i),this.__region=e,this.__isPainter=n,this.painter.textBaseline="middle",this.painter.textAlign="left"}return t.prototype.useConfig=function(t,i){if(this.__region&&!this.__onlyView&&["fillStyle","strokeStyle","shadowBlur","shadowColor"].indexOf(t)<0&&this.__region.useConfig(t,i),this.__isPainter&&this.__onlyRegion)return this;if("lineDash"==t)this.painter.setLineDash&&this.painter.setLineDash(i);else if(t in this.__specialConfig)"fontSize"==t&&(i=Math.round(i)),this.__specialConfig[t]=i;else{if(!(t in this.__initConfig))throw new Error("Illegal configuration item of painter : "+t+" !");this.painter[t]=i}return this},t.prototype.fillText=function(t,i,e,n){return void 0===n&&(n=0),this.__region&&!this.__onlyView&&this.__region.fillText(t,i,e,n),this.__isPainter&&this.__onlyRegion||(this.painter.save(),I(this.painter,this.__specialConfig,i,e,n).fillText(t,0,0),this.painter.restore()),this},t.prototype.strokeText=function(t,i,e,n){return void 0===n&&(n=0),this.__region&&!this.__onlyView&&this.__region.strokeText(t,i,e,n),this.__isPainter&&this.__onlyRegion||(this.painter.save(),I(this.painter,this.__specialConfig,i,e,n).strokeText(t,0,0),this.painter.restore()),this},t.prototype.fullText=function(t,i,e,n){return void 0===n&&(n=0),this.__region&&!this.__onlyView&&this.__region.fullText(t,i,e,n),this.__isPainter&&this.__onlyRegion||(this.painter.save(),I(this.painter,this.__specialConfig,i,e,n),this.painter.fillText(t,0,0),this.painter.strokeText(t,0,0),this.painter.restore()),this},t.prototype.fillTexts=function(t,i,e,n,r,o){var s=this;void 0===r&&(r=1.2),void 0===o&&(o=0);var a=0;if(this.__region&&!this.__onlyView&&(a=this.__region.fillTexts(t,i,e,n,r)),this.__isPainter&&this.__onlyRegion)return a;this.painter.save(),I(this.painter,this.__specialConfig,i,e,o);var _=V(this.painter,t,n,this.__specialConfig.fontSize*r,(function(t,i){s.painter.fillText(t,0,i)}));return this.painter.restore(),_},t.prototype.strokeTexts=function(t,i,e,n,r,o){var s=this;void 0===r&&(r=1.2),void 0===o&&(o=0);var a=0;if(this.__region&&!this.__onlyView&&(a=this.__region.fillTexts(t,i,e,n,r)),this.__isPainter&&this.__onlyRegion)return a;this.painter.save(),I(this.painter,this.__specialConfig,i,e,o);var _=V(this.painter,t,n,this.__specialConfig.fontSize*r,(function(t,i){s.painter.strokeText(t,0,i)}));return this.painter.restore(),_},t.prototype.fullTexts=function(t,i,e,n,r,o){var s=this;void 0===r&&(r=1.2),void 0===o&&(o=0);var a=0;if(this.__region&&!this.__onlyView&&(a=this.__region.fillTexts(t,i,e,n,r)),this.__isPainter&&this.__onlyRegion)return a;this.painter.save(),I(this.painter,this.__specialConfig,i,e,o);var _=V(this.painter,t,n,this.__specialConfig.fontSize*r,(function(t,i){s.painter.fillText(t,0,i),s.painter.strokeText(t,0,i)}));return this.painter.restore(),_},t.prototype.beginPath=function(){return this.__region&&!this.__onlyView&&this.__region.beginPath(),this.__isPainter&&this.__onlyRegion||this.painter.beginPath(),this},t.prototype.closePath=function(){return this.__region&&!this.__onlyView&&this.__region.closePath(),this.__isPainter&&this.__onlyRegion||this.painter.closePath(),this},t.prototype.moveTo=function(t,i){return this.__region&&!this.__onlyView&&this.__region.moveTo(t,i),this.__isPainter&&this.__onlyRegion||this.painter.moveTo(Math.round(t)+.5,Math.round(i)+.5),this},t.prototype.lineTo=function(t,i){return this.__region&&!this.__onlyView&&this.__region.lineTo(t,i),this.__isPainter&&this.__onlyRegion||this.painter.lineTo(Math.round(t)+.5,Math.round(i)+.5),this},t.prototype.arc=function(t,i,e,n,r){return this.__region&&!this.__onlyView&&this.__region.arc(t,i,e,n,r),this.__isPainter&&this.__onlyRegion||this.painter.arc(t,i,e,n,n+r,r<0),this},t.prototype.fill=function(){return this.__region&&!this.__onlyView&&this.__region.fill(),this.__isPainter&&this.__onlyRegion||this.painter.fill(),this},t.prototype.stroke=function(){return this.__region&&!this.__onlyView&&this.__region.stroke(),this.__isPainter&&this.__onlyRegion||this.painter.stroke(),this},t.prototype.full=function(){return this.__region&&!this.__onlyView&&this.__region.full(),this.__isPainter&&this.__onlyRegion||(this.painter.fill(),this.painter.stroke()),this},t.prototype.save=function(){return this.__region&&!this.__onlyView&&this.__region.save(),this.__isPainter&&this.__onlyRegion||this.painter.save(),this},t.prototype.restore=function(){return this.__region&&!this.__onlyView&&this.__region.restore(),this.__isPainter&&this.__onlyRegion||this.painter.restore(),this},t.prototype.clip=function(){return this.__region&&!this.__onlyView&&this.__region.clip(),this.__isPainter&&this.__onlyRegion||this.painter.clip(),this},t.prototype.quadraticCurveTo=function(t,i,e,n){return this.__region&&!this.__onlyView&&this.__region.quadraticCurveTo(t,i,e,n),this.__isPainter&&this.__onlyRegion||this.painter.quadraticCurveTo(t,i,e,n),this},t.prototype.bezierCurveTo=function(t,i,e,n,r,o){return this.__region&&!this.__onlyView&&this.__region.bezierCurveTo(t,i,e,n,r,o),this.__isPainter&&this.__onlyRegion||this.painter.bezierCurveTo(t,i,e,n,r,o),this},t.prototype.clearRect=function(t,i,e,n){return this.__region&&!this.__onlyView&&this.__region.clearRect(t,i,e,n),this.__isPainter&&this.__onlyRegion||this.painter.clearRect(t,i,e,n),this},t.prototype.clearCircle=function(t,i,e){return this.__region&&!this.__onlyView&&this.__region.clearCircle(t,i,e),this.__isPainter&&this.__onlyRegion||(this.painter.beginPath(),this.painter.globalCompositeOperation="destination-out",this.painter.arc(t,i,e,0,2*Math.PI),this.painter.fill(),this.painter.globalCompositeOperation="source-over",this.painter.closePath()),this},t.prototype.fillArc=function(t,i,e,n,r,o){return this.__region&&!this.__onlyView&&this.__region.fillArc(t,i,e,n,r,o),this.__isPainter&&this.__onlyRegion||k(this.painter,this.__specialConfig,t,i,e,n,r,o).fill(),this},t.prototype.strokeArc=function(t,i,e,n,r,o){return this.__region&&!this.__onlyView&&this.__region.strokeArc(t,i,e,n,r,o),this.__isPainter&&this.__onlyRegion||k(this.painter,this.__specialConfig,t,i,e,n,r,o).stroke(),this},t.prototype.fullArc=function(t,i,e,n,r,o){return this.__region&&!this.__onlyView&&this.__region.fullArc(t,i,e,n,r,o),this.__isPainter&&this.__onlyRegion||(k(this.painter,this.__specialConfig,t,i,e,n,r,o),this.painter.fill(),this.painter.stroke()),this},t.prototype.fillCircle=function(t,i,e){return this.__region&&!this.__onlyView&&this.__region.fillCircle(t,i,e),this.__isPainter&&this.__onlyRegion||L(this.painter,t,i,e).fill(),this},t.prototype.strokeCircle=function(t,i,e){return this.__region&&!this.__onlyView&&this.__region.strokeCircle(t,i,e),this.__isPainter&&this.__onlyRegion||L(this.painter,t,i,e).stroke(),this},t.prototype.fullCircle=function(t,i,e){return this.__region&&!this.__onlyView&&this.__region.fullCircle(t,i,e),this.__isPainter&&this.__onlyRegion||(L(this.painter,t,i,e),this.painter.fill(),this.painter.stroke()),this},t.prototype.fillRect=function(t,i,e,n){return this.__region&&!this.__onlyView&&this.__region.fillRect(t,i,e,n),this.__isPainter&&this.__onlyRegion||O(this.painter,this.__specialConfig,t,i,e,n).fill(),this},t.prototype.strokeRect=function(t,i,e,n){return this.__region&&!this.__onlyView&&this.__region.strokeRect(t,i,e,n),this.__isPainter&&this.__onlyRegion||O(this.painter,this.__specialConfig,t,i,e,n).stroke(),this},t.prototype.fullRect=function(t,i,e,n){return this.__region&&!this.__onlyView&&this.__region.fullRect(t,i,e,n),this.__isPainter&&this.__onlyRegion||(O(this.painter,this.__specialConfig,t,i,e,n),this.painter.fill(),this.painter.stroke()),this},t.prototype.draw=function(){return Promise.resolve()},t.prototype.drawImage=function(t,i,e,n,r,o){var s=this;return void 0===o&&(o=!1),new Promise((function(a){if(s.__region&&!s.__onlyView&&s.__region.fillRect(i,e,n,r),s.__isPainter&&s.__onlyRegion)a({});else if("string"!=typeof t||o)s.painter.drawImage(t,i,e,n,r),a({});else{var _=new Image;_.onload=function(){s.painter.drawImage(_,i,e,n,r),a({})},_.src=t}}))},t.prototype.install=function(t){var i=this,e=function(e){if(e in n)throw new Error("VISLite Canvas:Method already exists and cannot be overwritten.");n[e]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t[e].apply(i,n);return null!=o?o:i}},n=this;for(var r in t)e(r);return this},t}();function N(t,i,e,n){for(var r=[],o=0;o<n;o++)r[o]=t;return function(){for(var o=0;o<n;o++){if(r[o]+e<i){r[o]=+(r[o]+e).toFixed(7);break}o<n-1&&(r[o]=t)}return r}}var F=function(t,i){var e={value:function(){return t},setColor:function(n,r){return t.addColorStop(i?i(n):n,r),e}};return e},D=function(t){function i(i,e,n,r){void 0===n&&(n={}),void 0===r&&(r=1);var o=t.call(this,i,n,e?new B(e,{willReadFrequently:!0}):void 0,!0,r)||this;return o.name="Canvas",o.__regionList={},o.__regionAssemble=N(0,255,10,3),o.__scaleSize=r,o.setRegion(""),o}return l(i,t),i.prototype.config=function(t){for(var i in t)this.useConfig(i,t[i]);return this},i.prototype.reset=function(){return this.config(U()),this},i.prototype.onlyRegion=function(t){return this.__onlyRegion=t,this},i.prototype.onlyView=function(t){return this.__onlyView=t,this},i.prototype.setRegion=function(t){if(this.__region)if(t){if(null==this.__regionList[t]){var i=this.__regionAssemble();this.__regionList[t]="rgb("+i[0]+","+i[1]+","+i[2]+")"}this.__region.useConfig("fillStyle",this.__regionList[t])&&this.__region.useConfig("strokeStyle",this.__regionList[t])}else this.__region.useConfig("fillStyle","#000000")&&this.__region.useConfig("strokeStyle","#000000");return this},i.prototype.getRegion=function(t,i){var e=this;return new Promise((function(n){var r=e.__region?e.__region.painter.getImageData(t-.5,i-.5,1,1):{data:[0,0,0,0]},o=r.data,s=function(){if(e.__region)for(var t in e.__regionList)if("rgb("+o[0]+","+o[1]+","+o[2]+")"==e.__regionList[t]){n(t);break}n("")};o?s():r.then((function(t){o=t,s()}))}))},i.prototype.textWidth=function(t){this.painter.save(),I(this.painter,this.__specialConfig,0,0,0);var i=this.painter.measureText(t+"").width;return this.painter.restore(),i},i.prototype.getContext=function(t){return void 0===t&&(t=!1),t?this.__region?this.__region.painter:null:this.painter},i.prototype.getInfo=function(){return{width:this.painter.canvas.width/this.__scaleSize,height:this.painter.canvas.height/this.__scaleSize}},i.prototype.createLinearGradient=function(t,i,e,n){return r=this.painter,o=t,s=i,a=e,_=n,h=r.createLinearGradient(o,s,a,_),F(h);var r,o,s,a,_,h},i.prototype.createRadialGradient=function(t,i,e){return n=this.painter,r=t,o=i,s=e,a=n.createRadialGradient(r,o,0,r,o,s),F(a);var n,r,o,s,a},i.prototype.createConicGradient=function(t,i,e,n){return r=this.painter,o=t,s=i,a=e,_=n,h=r.createConicGradient(a,o,s),F(h,_?function(t){return _/(2*Math.PI)*t}:void 0);var r,o,s,a,_,h},i.prototype.getColor=function(t,i){t*=this.__scaleSize,i*=this.__scaleSize;var e=this.painter.getImageData(t-.5,i-.5,1,1).data;return"rgba("+e[0]+","+e[1]+","+e[2]+","+e[3]+")"},i}(B),H=Object.prototype.toString;function z(t){if(null===t||"object"!=typeof t||"[object Object]"!=(null==(i=t)?void 0===i?"[object Undefined]":"[object Null]":H.call(i)))return!1;var i;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function G(t,i){for(var e in t)i[e]=t[e];return i}function X(t,i){!function t(i,e){for(var n in e){var r=e[n];z(r)?(i[n]||(i[n]={}),t(i[n],e[n])):i[n]=r}}(t,i)}var j=function(t){function i(i,e,n,r){void 0===e&&(e={}),void 0===n&&(n=0),void 0===r&&(r=0);var o=this;if(!i)throw new Error("VISLite Canvas:The mount point requires an HTMLElement type but encountered null.");e=G(e,{scale:2,region:!0,willReadFrequently:!1}),n=n||i.clientWidth,r=r||i.clientHeight;var s,a=null,_=i;_._vislite_canvas_?(s=_._vislite_canvas_[0],a=_._vislite_canvas_[1]):(s=document.createElement("canvas"),i.appendChild(s),e.region&&(a=document.createElement("canvas")),_._vislite_canvas_=[s,a],i.setAttribute("vislite","Canvas"));for(var h=[a,s],u=0;u<h.length;u++){var l=h[u];l&&(l.style.width=n+"px",l.setAttribute("width",(1===u?e.scale:1)*n+""),l.style.height=r+"px",l.setAttribute("height",(1===u?e.scale:1)*r+""))}return(o=t.call(this,s,a,{willReadFrequently:e.willReadFrequently},e.scale)||this).__canvas=s,o.__el=i,o.painter.scale(e.scale,e.scale),o}return l(i,t),i.prototype.toDataURL=function(){var t=this;return new Promise((function(i){i(t.__canvas.toDataURL())}))},i.prototype.bind=function(t,i){var e=this;return this.__el.addEventListener(t,(function(t){e.getRegion(t.offsetX,t.offsetY).then((function(e){i(e,t.offsetX,t.offsetY)}))})),this},i}(D),q=function(t,i,e){var n=t.createShader(i);if(null==n)throw new Error("Unable to create shader!");if(t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error("Failed to compile shader:"+t.getShaderInfoLog(n));return n},W=function(){function t(t){this.__painter=t}return t.prototype.use=function(){return this.__painter.useProgram(this.program),this},t.prototype.compile=function(t,i){return this.program=function(t,i,e){var n=q(t,t.VERTEX_SHADER,i),r=q(t,t.FRAGMENT_SHADER,e),o=t.createProgram();if(t.attachShader(o,n),t.attachShader(o,r),t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS))throw new Error("Failed to link program: "+t.getProgramInfoLog(o));return o}(this.__painter,t,i),this},t}(),Y=function(){function t(t,i,e){var n,r,o,s;void 0===e&&(e=0),this.__painter=t,this.__type={"2d":t.TEXTURE_2D,cube:t.TEXTURE_CUBE_MAP}[i],this.__texture=(n=t,r=this.__type,o=e,s=n.createTexture(),n.activeTexture(n["TEXTURE"+o]),n.bindTexture(r,s),s),t.texParameteri(this.__type,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(this.__type,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(this.__type,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(this.__type,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}return t.prototype.useImage=function(t){return i=this.__painter,e=this.__type,n=this.__painter.RGBA,r=this.__painter.UNSIGNED_BYTE,o=t,i.texImage2D(e,0,n,n,r,o),this;var i,e,n,r,o},t.prototype.useCube=function(t,i,e){return function(t,i,e,n,r,o,s,a,_){for(var h,u=[t.TEXTURE_CUBE_MAP_POSITIVE_X,t.TEXTURE_CUBE_MAP_NEGATIVE_X,t.TEXTURE_CUBE_MAP_POSITIVE_Y,t.TEXTURE_CUBE_MAP_NEGATIVE_Y,t.TEXTURE_CUBE_MAP_POSITIVE_Z,t.TEXTURE_CUBE_MAP_NEGATIVE_Z],l=0;l<u.length;l++)o[l]&&(h=u[l],t.texImage2D(h,0,n,s,a,0,n,r,null),t.bindTexture(i,_),t.texImage2D(h,0,n,n,r,o[l]));t.generateMipmap(i)}(this.__painter,this.__type,0,this.__painter.RGBA,this.__painter.UNSIGNED_BYTE,t,i,e,this.__texture),this},t}(),$=function(){function t(t,i){void 0===i&&(i=!1),this.__painter=t,this.__isElement=i,this.__buffer=t.createBuffer(),this.__type=i?t.ELEMENT_ARRAY_BUFFER:t.ARRAY_BUFFER}return t.prototype.use=function(){return this.__painter.bindBuffer(this.__type,this.__buffer),this},t.prototype.write=function(t){return i=this.__painter,e=t,n=this.__isElement,r=this.__painter.STATIC_DRAW,o=n?i.ELEMENT_ARRAY_BUFFER:i.ARRAY_BUFFER,i.bufferData(o,e,r),this.__fsize=t.BYTES_PER_ELEMENT,this;var i,e,n,r,o},t.prototype.divide=function(t,i,e,n){return void 0===n&&(n=0),r=this.__painter,o=t,s=i,a=this.__painter.FLOAT,_=e*this.__fsize,h=n*this.__fsize,r.vertexAttribPointer(o,s,a,!1,_,h),r.enableVertexAttribArray(o),this;var r,o,s,a,_,h},t}(),J=function(t,i,e,n){var r=Math.cos(t),o=Math.sin(t);return[i*r-e*o,i*o+e*r,n]},Q=function(){function t(t,i){void 0===t&&(t=7),void 0===i&&(i=[107,36]),this.name="Eoap",this.__scale=t,this.__center=i}return t.prototype.use=function(t,i){var e,n,r,o,s,a,_,h,u,l,p=(e=(360-i)/180*Math.PI,n=100*this.__scale,r=Math.cos(e),[0*(o=Math.sin(e))+n*r,0,0*r-n*o]);return p=J(t/180*Math.PI,p[0],p[1],p[2]),p=J((90-this.__center[0])/180*Math.PI,p[0],p[1],p[2]),s=(90-this.__center[1])/180*Math.PI,a=p[0],_=p[1],h=p[2],u=Math.cos(s),l=Math.sin(s),[-(p=[a,_*u-h*l,_*l+h*u])[0],p[1],p[2]]},t}(),Z=function(t,i){void 0===t&&(t=7),void 0===i&&(i=[107,36]),this.name="Mercator";var e=100*t*Math.PI/180,n=e*i[0],r=-1*e*i[1];this.use=function(t,i){return[.8*(e*t-n),-1*e*i-r,0]}};function K(t){for(var i=null,e=null,n=null,r=null,o=function(t){for(var o=0;o<t.length;o++)for(var s=0;s<t[o].length;s++){var a=t[o][s][0],_=t[o][s][1];(null==i||i>a)&&(i=a),(null==e||e<a)&&(e=a),(null==n||n>_)&&(n=_),(null==r||r<_)&&(r=_)}},s=t.features,a=0;a<s.length;a++)if("Polygon"==s[a].geometry.type)o(s[a].geometry.coordinates);else if("MultiPolygon"==s[a].geometry.type)for(var _=0;_<s[a].geometry.coordinates.length;_++)o(s[a].geometry.coordinates[_]);return[i,e,n,r]}function tt(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];for(var e=null,n=null,r=null,o=null,s=0,a=t;s<a.length;s++){var _=K(a[s]),h=_[0],u=_[1],l=_[2],p=_[3];(null==e||h<e)&&(e=h),(null==n||u>n)&&(n=u),(null==r||l<r)&&(r=l),(null==o||p>o)&&(o=p)}return[e,n,r,o]}var it=function(){function t(t){void 0===t&&(t={}),this.name="MapCoordinate",this.__config=G(t,{api:"Mercator",width:400,height:300,left:0,top:0})}return t.prototype.$$updateMap=function(){var t=this.__boundary,i=t[0],e=t[1],n=t[2],r=t[3];if("Eoap"==this.__config.api){var o=.836*this.__config.width/(e-i),s=.557*this.__config.height/(r-n);this.__map=new Q(o<s?o:s,[.5*(i+e)*.9778,.5*(n+r)*1.025])}else{if("Mercator"!=this.__config.api)throw new Error("Unexpected API types:"+this.__config.api);o=.72*this.__config.width/(e-i),s=.575*this.__config.height/(r-n),this.__map=new Z(o<s?o:s,[.5*(i+e),.5*(n+r)])}},t.prototype.setConfig=function(t){return X(this.__config,t),this.$$updateMap(),this},t.prototype.setGeos=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return this.__boundary=tt.apply(void 0,t),this.$$updateMap(),this},t.prototype.use=function(t,i){if(this.__map){var e=this.__map.use(t,i);return[this.__config.left+.5*this.__config.width+e[0],this.__config.top+.5*this.__config.height+e[1]]}throw new Error("Geographic data not set")},t}(),et=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.name="TreeLayout",i.__option={offsetX:0,offsetY:0,duration:500,type:"plain",direction:"LR",x:100,y:100,width:100,height:100,radius:100},i.__noOpens={},i}return l(i,t),i.prototype.setOption=function(t){return G(t,this.__option),this},i.prototype.use=function(i,e){void 0===e&&(e={});var n=t.prototype.use.call(this,i,e);if(0!=this.__option.offsetX||0!=this.__option.offsetY)for(var r in n.node)if(!n.node[r].show){var s=0,a=r;do{a=n.node[a].pid,s++}while(!n.node[a].show);n.node[r].left+=this.__option.offsetX*s,n.node[r].top+=this.__option.offsetY*s}if("rect"==this.__option.type){if("LR"==this.__option.direction||"RL"==this.__option.direction){var _=this.__option.height/n.size,h=this.__option.width/(n.deep-1),u=this.__option.y-.5*this.__option.height,l="LR"==this.__option.direction?1:-1;for(var r in n.node)1==n.deep?(n.node[r].left=this.__option.x+.5*this.__option.width*l,n.node[r].top=this.__option.y):(n.node[r].left=this.__option.x+(n.node[r].left-.5)*h*l,n.node[r].top=n.node[r].top*_+u)}else if("TB"==this.__option.direction||"BT"==this.__option.direction)for(var r in _=this.__option.width/n.size,h=this.__option.height/(n.deep-1),u=this.__option.x-.5*this.__option.width,l="TB"==this.__option.direction?1:-1,n.node)if(n.node[r].deg="TB"==this.__option.direction?.5*Math.PI:-.5*Math.PI,1==n.deep)n.node[r].left=this.__option.x,n.node[r].top=this.__option.y+.5*this.__option.height*l;else{var p=n.node[r].left;n.node[r].left=n.node[r].top*_+u,n.node[r].top=this.__option.y+(p-.5)*h*l}}else if("circle"==this.__option.type){var c=this.__option.x,f=this.__option.y,d=2*Math.PI/n.size,g=this.__option.radius/(n.deep-1);for(var r in n.node)if(.5==n.node[r].left)n.node[r].left=c,n.node[r].top=f;else{var v=o(c,f,d*n.node[r].top,c+(n.node[r].left-.5)*g,f);n.node[r].deg=d*n.node[r].top,n.node[r].left=v[0],n.node[r].top=v[1]}}return n},i.prototype.bind=function(t,i,e){return void 0===e&&(e={}),this.__rback=i,this.__oralTree=t,this.__noOpens=e,this.__preTree=this.use(this.__oralTree,this.__noOpens),this.__rback(this.__preTree),this},i.prototype.unbind=function(){return this.__rback=function(){return null},this.__oralTree=null,this.__preTree=null,this.__noOpens={},this},i.prototype.doUpdate=function(){var t=this,i=this.use(this.__oralTree,this.__noOpens),e=JSON.parse(JSON.stringify(i));return _((function(n){if(t.__preTree)for(var r in e.node)(i.node[r].show||t.__preTree.node[r].show)&&(e.node[r].show=!0,e.node[r].left=t.__preTree.node[r].left+(i.node[r].left-t.__preTree.node[r].left)*n,e.node[r].top=t.__preTree.node[r].top+(i.node[r].top-t.__preTree.node[r].top)*n);t.__rback(e)}),this.__option.duration,(function(){t.__preTree=i,t.__rback(t.__preTree)})),this},i.prototype.closeNode=function(t){return this.__preTree?(this.__noOpens[t]=!0,this.doUpdate(),this):this},i.prototype.openNode=function(t){return this.__preTree?(this.__noOpens[t]=!1,this.doUpdate(),this):this},i.prototype.toggleNode=function(t){return this.__preTree?(this.__noOpens[t]=!this.__noOpens[t],this.doUpdate(),this):this},i}(function(){function t(t){void 0===t&&(t={}),this.name="Tree",this.__config=G(t,{root:function(t){return t},children:function(t){return t.children},id:function(t){return t.name}})}return t.prototype.use=function(t,i){return void 0===i&&(i={}),function(t,i,e){var n=function(t,i){var e,n,r={},o=i.root(t);e=n=i.id(o),r[e]={data:o,pid:null,id:e,isOpen:!0,show:!0,deg:0,children:[]};var s=1;return function n(o,a){var _=i.children(o,t);s+=_?_.length:0;for(var h=0;_&&h<_.length;h++)e=i.id(_[h]),r[a].children.push(e),r[e]={data:_[h],pid:a,id:e,isOpen:!0,show:!0,deg:0,children:[]},n(_[h],e)}(o,e),{rid:n,value:r,num:s}}(t,i),r=n.value,o=n.rid;if(1==n.num)return r[o].left=.5,r[o].top=.5,r[o].show=!0,{deep:1,node:r,root:o,size:1};var s=[],a=0,_=0;for(var h in e[o]?(r[o].left=.5,r[o].top=.5,r[o].show=!0,a=1):function t(i,n){n>_&&(_=n);var o=0;if(!e[i.id])for(o=0;o<i.children.length;o++)t(r[i.children[o]],n+1);if(r[i.id].left=n+.5,0==o?(null==s[n]&&(s[n]=-.5),null==s[n-1]&&(s[n-1]=-.5),r[i.id].top=s[n]+1,s[n]+1+.5*(r[i.pid].children.length-1)-1<s[n-1]&&(r[i.id].top=s[n-1]+1-.5*(r[i.pid].children.length-1))):r[i.id].top=.5*(r[i.children[0]].top+r[i.children[o-1]].top),r[i.id].top<=s[n])var h=s[n]+1-r[i.id].top((function t(i,e){r[i].top+=h,s[e]<r[i].top&&(s[e]=r[i].top);for(var n=0;n<r[i].children.length;n++)t(r[i].children[n],e+1)}))(i.id,n);s[n]=r[i.id].top,r[i.id].top+.5>a&&(a=r[i.id].top+.5)}(r[o],0),e)e[h]&&(r[h].isOpen=!1,function t(i,e,n){for(var o=0;o<r[i].children.length;o++)r[r[i].children[o]].left=e,r[r[i].children[o]].top=n,r[r[i].children[o]].show=!1,t(r[i].children[o],e,n)}(h,r[h].left,r[h].top));return{node:r,root:o,size:a,deep:_+1}}(t,this.__config,i)},t}()),nt=function(){function t(t){void 0===t&&(t={}),this.name="PieLayout",this.__option={cx:200,cy:200,radius:[50,100],duration:200},this.__hoverIndex=-1,this.__config=G(t,{name:function(t,i){return t.name},value:function(t,i){return t.value}})}return t.prototype.setOption=function(t){return G(t,this.__option),this},t.prototype.use=function(t,i){void 0===i&&(i=-1);for(var e={count:t.length,cx:this.__option.cx,cy:this.__option.cy,radius:this.__option.radius,hoverIndex:i,node:[]},n=0,r=[],s=[],a=0;a<t.length;a++)r[a]=this.__config.name(t[a],t),s[a]=this.__config.value(t[a],t),n+=s[a];var _,h=-.5*Math.PI;for(a=0;a<t.length;a++){_=s[a]/n*Math.PI*2;var u=[this.__option.radius[0],this.__option.radius[1]*(1+(i===a?.05:0))],l=h+.5*_,p=Math.max(this.__option.radius[0],this.__option.radius[1]),c=o(e.cx,e.cy,l,e.cx+p,e.cy),f=o(e.cx,e.cy,l,e.cx+p+15,e.cy),d=c[0]>e.cx?1:-1,g=[f[0]+20*d,f[1]],v=[f[0]+25*d,f[1]];e.node[a]={value:s[a],name:r[a],beginDeg:h,deg:_,isHover:i===a,radius:u,label:{line:[c,f,g],position:v,align:-1===d?"right":"left"}},h+=_}return e},t.prototype.bind=function(t,i){return this.__rback=i,this.__oralPie=t,this.__prePie=this.use(this.__oralPie,this.__hoverIndex),this.__rback(this.__prePie),this},t.prototype.unbind=function(){return this.__rback=function(){return null},this.__oralPie=null,this.__prePie=null,this.__hoverIndex=-1,this},t.prototype.setHover=function(t){return this.__prePie&&this.__hoverIndex!==t?(this.__hoverIndex=t,this.doUpdate(),this):this},t.prototype.doUpdate=function(){var t=this,i=this.use(this.__oralPie,this.__hoverIndex),e=JSON.parse(JSON.stringify(i));return _((function(n){if(t.__prePie)for(var r=0;r<e.count;r++)e.node[r].radius[1]=t.__prePie.node[r].radius[1]+(i.node[r].radius[1]-t.__prePie.node[r].radius[1])*n;t.__rback(e)}),this.__option.duration,(function(){t.__prePie=i,t.__rback(t.__prePie)})),this},t}(),rt=function(){function t(t){void 0===t&&(t={}),this.name="BarLayout",this.__option={x:50,y:350,width:400,height:300,category:"xAxis",duration:200},this.__config=G(t,{})}return t.prototype.setOption=function(t){return G(t,this.__option),this},t.prototype.use=function(t){var i={coordinate:{x:this.__option.x,y:this.__option.y,width:this.__option.width,height:this.__option.height,xAxis:{type:"xAxis"===this.__option.category?"category":"value",data:[]},yAxis:{type:"xAxis"===this.__option.category?"value":"category",data:[]}},node:[]},e=void 0,n=void 0;if(t.data)for(var r=0,o=t.data;r<o.length;r++){var s=o[r];(void 0===e||s>e)&&(e=s),(void 0===n||s<n)&&(n=s)}else{if(!t.value)throw new Error("No data leads to parsing errors");for(var a=0,_=t.value;a<_.length;a++)for(var u=0,l=_[a].data;u<l.length;u++)s=l[u],(void 0===e||s>e)&&(e=s),(void 0===n||s<n)&&(n=s)}var p,c,f=h(e||0,n||0,5);"xAxis"===this.__option.category?(i.coordinate.xAxis.data=t.category,i.coordinate.yAxis.data=f,p=this.__option.width,c=-1*this.__option.height):(i.coordinate.xAxis.data=f,i.coordinate.yAxis.data=t.category,p=this.__option.height,c=this.__option.width);var d=[],g=p/t.category.length,v=.9*g,y=.05*g;if(t.data)for(var m=0;m<t.data.length;m++)d.push([y+g*m,v]);else{var w=v/t.value.length,x=.9*w,E=.05*w;for(m=0;m<t.value[0].data.length;m++){d[m]=[];for(var b=0;b<t.value.length;b++)d[m].push([y+g*m+w*b+E,x])}}var P=c/(f[f.length-1]-f[0]),T=function(t){return P*(t-f[0])};if("xAxis"===this.__option.category)if(t.data){var C=[];for(m=0;m<t.data.length;m++)C.push({x:this.__option.x+d[m][0],y:this.__option.y,width:d[m][1],height:T(t.data[m]),value:t.data[m]});i.node.push({bar:C})}else for(b=0;b<t.value.length;b++){for(C=[],m=0;m<t.value[b].data.length;m++)C.push({x:this.__option.x+d[m][b][0],y:this.__option.y,width:d[m][b][1],height:T(t.value[b].data[m]),value:t.value[b].data[m]});i.node.push({name:t.value[b].name,bar:C})}else if(t.data){for(C=[],m=0;m<t.data.length;m++)C.push({x:this.__option.x,y:this.__option.y-this.__option.height+d[m][0],width:T(t.data[m]),height:d[m][1],value:t.data[m]});i.node.push({bar:C})}else for(b=0;b<t.value.length;b++){for(C=[],m=0;m<t.value[b].data.length;m++)C.push({x:this.__option.x,y:this.__option.y-this.__option.height+d[m][b][0],width:T(t.value[b].data[m]),height:d[m][b][1],value:t.value[b].data[m]});i.node.push({name:t.value[b].name,bar:C})}return i},t.prototype.bind=function(t,i){return this.__rback=i,this.__oralBar=t,this.__preBar=this.use(this.__oralBar),this.__rback(this.__preBar),this},t.prototype.unbind=function(){return this.__rback=function(){return null},this.__oralBar=null,this.__preBar=null,this},t.prototype.doUpdate=function(){var t=this,i=this.use(this.__oralBar),e=JSON.parse(JSON.stringify(i));return _((function(i){t.__preBar,t.__rback(e)}),this.__option.duration,(function(){t.__preBar=i,t.__rback(t.__preBar)})),this},t}(),ot={Cardinal:i,Hermite:t,Matrix4:r,rotate:o,move:function(t,i,e,n,r){var o=Math.sqrt(t*t+i*i);return[t*e/o+n,i*e/o+r]},scale:function(t,i,e,n,r){return[e*(n-t)+t,e*(r-i)+i]},getLoopColors:function(t,i,e){void 0===i&&(i=1);var n=e?e(i):["rgba(84,112,198,"+i+")","rgba(145,204,117,"+i+")","rgba(250,200,88,"+i+")","rgba(238,102,102,"+i+")","rgba(115,192,222,"+i+")","rgba(59,162,114,"+i+")","rgba(252,132,82,"+i+")","rgba(154,96,180,"+i+")","rgba(234,124,204,"+i+")"],r=[];if(t<=n.length)return n;if(t%n.length==0)for(var o=0;o<t/n.length;o++)r=r.concat(n);else{for(var s=1;s<t/n.length;s++)r=r.concat(n);if(t%n.length==1)r=r.concat(n[4]);else for(var a=0;a<t%n.length;a++)r=r.concat(n[a])}return r},animation:function(t,i,e){return _(t,i||400,e||function(){}).stop},ruler:h,SVG:A,Canvas:j,RawCanvas:D,getWebGLContext:function(t,i,e){if(void 0===i&&(i=1),!t)throw new Error("VISLite getWebGLContext:The mount point requires an HTMLElement type but encountered null.");var n,r=t.clientWidth,o=t.clientHeight,s=t;return s._vislite_canvas_?n=s._vislite_canvas_:(n=document.createElement("canvas"),t.appendChild(n),s._vislite_canvas_=n,t.setAttribute("vislite","WebGL")),n.style.width=r+"px",n.setAttribute("width",r+""),n.style.height=o+"px",n.setAttribute("height",o+""),function(t,i,e,n){void 0===e&&(e={}),void 0===n&&(n="scaleToFill");for(var r=["experimental-webgl","webkit-3d","moz-webgl"],o=t.getContext("webgl",e),s=0;s<r.length;s++){try{o=t.getContext(r[s],e)}catch(c){}if(o)break}if(!o)throw new Error("Non canvas or browser does not support webgl.");var a=o.canvas.width,_=o.canvas.height,h=i,u=i;"aspectFit"==n?a>_?h*=_/a:_>a&&(u*=a/_):"aspectFill"==n&&(a>_?u*=a/_:_>a&&(h*=_/a));var l=a*h,p=_*u;return o.viewport(.5*(a-l),.5*(_-p),l,p),o.depthFunc(o.LEQUAL),o.enable(o.DEPTH_TEST),o}(n,i,{},e)},Shader:W,Texture:Y,Buffer:$,Eoap:Q,Mercator:Z,throttle:
/*!
          * throttle of OIPage v1.3.0
          * git+https://github.com/oi-contrib/OIPage.git
          */function(t,i){var e={time:200,keep:!1,opportunity:"end"};if(i)for(var n in i)e[n]=i[n];var r,o=!1,s=!1,a=!1;return function(){const i=this;if(r=arguments,o)s=!0,a=!0;else{"end"!=e.opportunity&&t.apply(i,r),o=!0;var n=setInterval((()=>{s?e.keep||t.apply(i,r):("begin"!=e.opportunity&&(a||"end"==e.opportunity)&&t.apply(i,r),o=!1,a=!1,clearInterval(n)),s=!1}),e.time)}}},assemble:N,MapCoordinate:it,TreeLayout:et,PieLayout:nt,BarLayout:rt,initOption:G,mergeOption:X};return ot}();
/*!
* VISLite JavaScript Library v1.5.0
* git+https://github.com/oi-contrib/VISLite.git
*/const d=p(t({name:"UQCanvas",props:{width:{type:Number,default:300},height:{type:Number,default:200}},emits:["start","move","end"],setup(t,{expose:p,emit:c}){let d=i((1e4*Math.random()).toFixed(0));const g=h();let v=(t,i)=>{uni.createSelectorQuery().selectViewport().scrollOffset((()=>{})).exec((e=>{uni.createSelectorQuery().in(g).select("#uni-canvas-"+d.value).boundingClientRect((n=>{c(i,{x:t.changedTouches[0].pageX-n.left-e[0].scrollLeft,y:t.changedTouches[0].pageY-n.top-e[0].scrollTop})})).exec()}))},y=t=>{v(t,"start")},m=t=>{v(t,"move")},w=t=>{v(t,"end")};return p({fetch(){let t="";t="painter-"+d.value;let i=uni.createCanvasContext(t,g),e=new f.RawCanvas({getContext:()=>i},null,1);e.draw=function(t,n){return i.draw(t,n),e},e.toDataURL=function(){return new Promise((i=>{uni.canvasToTempFilePath({canvasId:t,success:function(t){i(t.tempFilePath)},fail:function(t){console.error(t)}},g)}))};let n=e.drawImage;return e.drawImage=function(t,i,r,o,s){return new Promise((a=>{/^http/.test(t)?uni.downloadFile({url:t,success:function(t){n.call(e,t.tempFilePath,i,r,o,s,!0).then((()=>{a({})}))}}):n.call(e,t,i,r,o,s,!0).then((()=>{a({})}))}))},new Promise((t=>{t(e)}))}}),(i,h)=>{const p=u,c=l;return e(),n(c,{class:"canvas-container",id:"uni-canvas-"+s(d),onTouchstart:_(s(y),["stop","prevent"]),onTouchmove:_(s(m),["stop","prevent"]),onTouchend:_(s(w),["stop","prevent"])},{default:r((()=>[o(p,{"canvas-id":"painter-"+s(d),style:a({width:t.width+"px",height:t.height+"px",display:"block!important"})},null,8,["canvas-id","style"])])),_:1},8,["id","onTouchstart","onTouchmove","onTouchend"])}}}),[["__scopeId","data-v-67710d15"]]);export{d as U,f as i};
