import{d as e,r as t,e as a,o as i,c as s,w as l,u as r,C as n,g as o,i as d,a as u,m as c,p}from"./index-df4b44f3.js";import{V as h,i as f,U as g}from"./index.f0d55a05.js";import{C as m}from"./index.0cbe80d5.js";import{_ as x}from"./plugin-vueexport-helper.1b428a4d.js";const y=x(e({name:"UQSimplePie",props:{data:{type:Array,default:[]}},setup(e){const u=e;let c="ui-simple-pie-"+(1e4*Math.random()).toFixed(0),p=o(),x=t(0),y=t(0),v=t();return m.install(h),a((()=>{uni.createSelectorQuery().in(p).select("#"+c).boundingClientRect((e=>{x.value=e.width,y.value=e.height,setTimeout((()=>{v.value.fetch().then((t=>{let a=[],i=[];for(let e of u.data)a.push(e.value),i.push(e.name);new m({grid:{width:e.width,height:e.height,left:80,right:80},series:[{type:"pie",data:a}],update(e){if(e.series[0]&&"pie"==e.series[0].type){let a=e.series[0],s=f.getLoopColors(a.arcs.length);for(let e=0;e<a.arcs.length;e++){let l=a.arcs[e];t.config({fillStyle:s[e]}).fillArc(l.cx,l.cy,l.radius[0],l.radius[1],l.beginDeg,l.deg);let r=l.beginDeg+.5*l.deg,n=Math.max(l.radius[0],l.radius[1]),o=f.rotate(l.cx,l.cy,r,l.cx+n,l.cy),d=f.rotate(l.cx,l.cy,r,l.cx+n+15,l.cy),u=o[0]>l.cx?1:-1;t.config({strokeStyle:s[e],lineWidth:1.5}).beginPath().moveTo(...o).lineTo(...d).lineTo(d[0]+15*u,d[1]).stroke(),t.config({fillStyle:"#929292",textAlign:o[0]>l.cx?"left":"right",fontSize:12,fontWeight:400}).fillText(i[e],d[0]+20*u,d[1])}}t.draw()}})}))}),200)})).exec()})),(e,t)=>{const a=d;return i(),s(a,{class:"simple-pie-container",id:r(c)},{default:l((()=>[0!=r(x)&&0!=r(y)?(i(),s(g,{key:0,ref_key:"canvasRef",ref:v,width:r(x),height:r(y)},null,8,["width","height"])):n("",!0)])),_:1},8,["id"])}}}),[["__scopeId","data-v-e1a236e5"]]),v=x(e({__name:"index",setup(e){let t=[{value:1048,name:"搜索引擎"},{value:735,name:"直接收入"},{value:580,name:"邮箱"},{value:484,name:"工会广告"},{value:300,name:"视频广告"}];return(e,a)=>{const n=c(p("ui-simple-pie"),y),o=d;return i(),s(o,{class:"example-container"},{default:l((()=>[u(o,{style:{height:"750rpx"}},{default:l((()=>[u(n,{data:r(t)},null,8,["data"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-102fc822"]]);export{v as default};
