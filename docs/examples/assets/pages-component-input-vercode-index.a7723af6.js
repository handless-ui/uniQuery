import{d as e,r as l,J as a,A as s,o as t,c as o,w as n,a as u,k as c,x as r,u as p,b as i,y as d,t as v,F as m,v as f,n as _,s as h,i as k,q as x,I as b,e as y,m as C,p as g}from"./index-e92cd80c.js";import{U as I}from"./index.79e01f8a.js";import{_ as w}from"./plugin-vueexport-helper.1b428a4d.js";const j=w(e({name:"UQInputVercode",emits:["help","send"],setup(e,{expose:y,emit:C}){let g,w=l(""),j={},V=l(!1),U=l(!1),$=l(""),q=l("-520rpx"),T=()=>{C("help")},A=l(0),B=()=>{0==A.value&&(C("send"),g=setInterval((()=>{A.value<60?A.value+=1:(g&&clearInterval(g),A.value=0)}),1e3))},F=e=>{V.value=!1,q.value="-520rpx",$.value="",e?j.resolve(e):j.reject("用户取消了输入")};a((()=>{g&&clearInterval(g)}));let H=()=>{$.value&&6==$.value.length?F($.value):uni.showModal({title:"温馨提示",content:"验证码输入非法，长度不足6位～",showCancel:!1})},J=()=>{U.value=!1},M=()=>{U.value=!0};return y({open(e){var l;return w.value=(l=e.phone)?l.replace(/^(\d{3})(\d{4})(\d{4})$/,"$1 **** $3"):"",V.value=!0,B(),s((()=>{setTimeout((()=>{q.value="0"}),50)})),new Promise(((e,l)=>{j={resolve:e,reject:l}}))}}),(e,l)=>{const a=k,s=x,y=b;return t(),o(I,{show:p(V),onClick:l[8]||(l[8]=e=>p(F)())},{default:n((()=>[u(a,{onClick:l[7]||(l[7]=c((()=>{}),["stop"])),class:"input-vercode-container",style:r([{bottom:p(q)}])},{default:n((()=>[u(a,{class:"title"},{default:n((()=>[i(" 输入短信验证码 "),u(a,{class:"close",onClick:l[0]||(l[0]=e=>p(F)())},{default:n((()=>[i("+")])),_:1})])),_:1}),u(a,{class:"tips"},{default:n((()=>[i(" 短信验证码发送至 "+d(p(w)),1)])),_:1}),u(a,{class:"input-box",onClick:l[1]||(l[1]=e=>p(M)())},{default:n((()=>[(t(),v(m,null,f([1,2,3,4,5,6],((e,l)=>u(a,{key:l,class:_(["item",[{active:p($).length>=e,input:p(U)&&p($).length==e-1}]])},{default:n((()=>[i(d(p($)[l]),1)])),_:2},1032,["class"]))),64))])),_:1}),u(a,{class:"footer"},{default:n((()=>[0!=p(A)?(t(),v("span",{key:0},d(60-p(A))+"s后重新发送 ",1)):(t(),v("span",{key:1,onClick:l[2]||(l[2]=e=>p(B)())}," 发送验证码 ")),u(a,{class:"btn",onClick:l[3]||(l[3]=e=>p(T)())},{default:n((()=>[i("没收到验证码？")])),_:1})])),_:1}),u(s,{class:_([[{invalid:p($).length<6}],"submit"]),onClick:l[4]||(l[4]=e=>p(H)())},{default:n((()=>[i("确定")])),_:1},8,["class"]),u(y,{class:"help-input",maxlength:"6",type:"number",focus:p(U),onBlur:l[5]||(l[5]=e=>p(J)()),modelValue:p($),"onUpdate:modelValue":l[6]||(l[6]=e=>h($)?$.value=e:$=e)},null,8,["focus","modelValue"])])),_:1},8,["style"])])),_:1},8,["show"])}}}),[["__scopeId","data-v-be706164"]]),V=w(e({__name:"index",setup(e){let a=l(),s=()=>{a.value&&a.value.open({phone:"13312341234"}).then((e=>{console.log(e)})).catch((e=>{console.error(e)}))},c=()=>{console.log("获得帮助！")},r=()=>{console.log("发送验证码！")};return y((()=>{setTimeout((()=>{s()}),500)})),(e,l)=>{const d=C(g("ui-input-vercode"),j),v=x,m=k;return t(),o(m,{class:"example-container"},{default:n((()=>[u(d,{ref_key:"myInputVercodeRef",ref:a,onHelp:l[0]||(l[0]=e=>p(c)()),onSend:l[1]||(l[1]=e=>p(r)())},null,512),u(v,{class:"example-btnbottom",type:"primary",onClick:p(s)},{default:n((()=>[i(" 点击我试试 ")])),_:1},8,["onClick"])])),_:1})}}}),[["__scopeId","data-v-bddeba1a"]]);export{V as default};
