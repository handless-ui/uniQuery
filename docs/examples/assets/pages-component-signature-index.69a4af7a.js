import{d as e,r as a,e as t,o as n,c as s,w as o,a as i,n as l,u as r,C as u,b as c,g as d,i as f,q as v,m as h,p as m}from"./index-e92cd80c.js";import{U as g}from"./index.3daaf475.js";import{_ as p}from"./plugin-vueexport-helper.1b428a4d.js";const x=p(e({name:"UQSignature",emits:["save","close"],setup(e,{emit:h}){let m,p="ui-signature-"+(1e4*Math.random()).toFixed(0),x=d(),_=a(0),y=a(0),b=a();a();let k=!1,w=a(!1),S=e=>({x:e.y,y:y.value-e.x}),C=e=>{e=S(e),m&&(k=!0,m.beginPath().moveTo(e.x,e.y))},T=e=>{e=S(e),m&&k&&(m.lineTo(e.x,e.y).stroke().draw(!0),m.moveTo(e.x,e.y))},R=e=>{e=S(e),m&&(k=!1,m.lineTo(e.x,e.y).stroke().draw(!0))};function j(){m&&m.clearRect(0,0,_.value,y.value).draw(!0)}function M(){m&&m.toDataURL().then((e=>{h("save",e)}))}function U(){h("close")}return t((()=>{uni.createSelectorQuery().in(x).select("#"+p).boundingClientRect((e=>{_.value=e.width,y.value=e.height,setTimeout((()=>{w.value=!0,b.value.fetch().then((e=>{m=e.config({strokeStyle:"black",lineWidth:2})}))}),200)})).exec()})),(e,a)=>{const t=f,d=v;return n(),s(t,{class:"signature-container"},{default:o((()=>[i(t,{class:l(["signature-canvas-container",r(w)?"initial":""]),id:r(p)},{default:o((()=>[0!=r(_)&&0!=r(y)?(n(),s(g,{key:0,onStart:r(C),onMove:r(T),onEnd:r(R),ref_key:"canvasRef",ref:b,width:r(_),height:r(y)},null,8,["onStart","onMove","onEnd","width","height"])):u("",!0)])),_:1},8,["class","id"]),i(t,{class:"signature-btns-container"},{default:o((()=>[i(d,{class:"btn",onClick:j,plain:!0},{default:o((()=>[c("重写")])),_:1}),i(d,{class:"btn primary",onClick:M},{default:o((()=>[c("保存")])),_:1}),i(d,{class:"btn warn",onClick:U},{default:o((()=>[c("关闭")])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-05bf563b"]]),_=e({__name:"index",setup(e){let a=e=>{console.log(e)};return(e,t)=>{const o=h(m("ui-signature"),x);return n(),s(o,{onSave:r(a)},null,8,["onSave"])}}});export{_ as default};
