import{d as e,e as l,r as a,o as t,c as r,w as s,f as u,n,u as o,g as i,i as d,h as p,j as m,a as f,k as c,l as _,b as h,I as v,m as g,p as y,q as b}from"./index-7053ad66.js";import{_ as V}from"./_plugin-vue_export-helper.1b428a4d.js";const q=e({name:"UQFormItem",props:{prop:{type:String},required:{type:Boolean}},setup(e){const p=e;let m=i();l((()=>{let e=c();e.___children||(e.___children=[]),e.___children.push(m)}));let f=a(!0);m.__doValidateCheck=(e,l)=>{if(p.required){let e=!0;l.forEach((l=>{l.required&&(e=!1)})),e&&l.push({required:!0,message:"必输"})}let a=((e,l)=>{for(let a in l){let t=l[a];for(let l in t)if(l in uni._uniQuery.validate&&!uni._uniQuery.validate[l](e,t[l]))return{flag:!1,msg:t.message}}return{flag:!0,msg:"合法"}})(e,l);return f.value=a.flag,a};let c=(e="UQForm")=>{let l=null==m?void 0:m.parent,a=null==l?void 0:l.type.name;for(;a!==e;){if(l=null==l?void 0:l.parent,!l)return!1;a=l.type.name}return l};return(e,l)=>{const a=d;return t(),r(a,{class:n([o(f)?"ui-valid":"ui-invalid"])},{default:s((()=>[u(e.$slots,"default")])),_:3},8,["class"])}}}),x=e({name:"UQForm",props:{rules:{type:Object,default:()=>({})},value:{type:Object,default:()=>({})}},setup(e,{expose:h}){const v=e;let g=i(),y=p(v.rules),b=p(v.value),V=a(!0);m((()=>v.rules),(e=>{y=e,q()}),{deep:!0}),m((()=>v.value),(e=>{b=e;let l=q(!0);V.value=l.flag}),{deep:!0}),l((()=>{let e=q(!0);V.value=e.flag}));h({submit:()=>{let e=q(!0);return e.flag?Promise.resolve(e.msg):Promise.reject(e.msg)}});let q=(e=!1)=>{if(null==g?void 0:g.___children)for(const l of null==g?void 0:g.___children){let a=l,t=a.__doValidateCheck(b[a.props.prop],y[a.props.prop],b);if(e&&!t.flag)return t}return{flag:!0,msg:"合法"}},x=()=>{},j=()=>{};return(e,l)=>{const a=_,i=d;return t(),r(i,null,{default:s((()=>[f(a,{class:n(["ui-form",[o(V)?"ui-form-valid":"ui-form-invalid"]]),onSubmit:c(o(x),["stop"]),onReset:o(j)},{default:s((()=>[u(e.$slots,"default")])),_:3},8,["onSubmit","onReset","class"])])),_:3})}}}),j=V(e({__name:"index",setup(e){let l=a(),u=p({name:"",phone:""}),n={name:[{required:!0,message:"请输入姓名"}],phone:[{required:!0,message:"请输入手机号"},{phone:!0,message:"请输入正确的手机号"}]},i=()=>{l.value.submit().then((()=>{uni.showToast({title:"表单合法了～",icon:"none",duration:2e3})})).catch((e=>{uni.showToast({title:e,icon:"none",duration:2e3})}))};return(e,a)=>{const p=d,m=v,c=g(y("ui-form-item"),q),_=b,V=g(y("ui-form"),x);return t(),r(p,{class:"example-container"},{default:s((()=>[f(V,{ref_key:"myformRef",ref:l,rules:o(n),value:o(u)},{default:s((()=>[f(c,{prop:"name"},{default:s((()=>[f(p,{class:"input-item"},{default:s((()=>[f(p,{class:"label"},{default:s((()=>[h(" 姓名 ")])),_:1}),f(m,{modelValue:o(u).name,"onUpdate:modelValue":a[0]||(a[0]=e=>o(u).name=e),placeholder:"请输入您的姓名"},null,8,["modelValue"])])),_:1})])),_:1}),f(c,{prop:"phone"},{default:s((()=>[f(p,{class:"input-item"},{default:s((()=>[f(p,{class:"label"},{default:s((()=>[h(" 联系方式 ")])),_:1}),f(m,{modelValue:o(u).phone,"onUpdate:modelValue":a[1]||(a[1]=e=>o(u).phone=e),placeholder:"请输入您的手机号"},null,8,["modelValue"])])),_:1})])),_:1}),f(_,{class:"example-btnbottom",type:"primary",onClick:o(i)},{default:s((()=>[h("提交")])),_:1},8,["onClick"])])),_:1},8,["rules","value"])])),_:1})}}}),[["__scopeId","data-v-c411c38a"]]);export{j as default};
