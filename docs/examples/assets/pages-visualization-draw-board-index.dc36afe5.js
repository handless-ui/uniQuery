import{d as e,r as a,e as t,o,c as s,w as n,u as r,C as i,g as d,i as l,a as c,b as u,m,p as f,q as h}from"./index-c6e72d6b.js";import{U as p}from"./index.03222c8d.js";import{_ as v}from"./plugin-vueexport-helper.1b428a4d.js";const x=v(e({name:"UQDrawBoard",setup(e,{expose:c}){let u,m="ui-draw-board-"+(1e4*Math.random()).toFixed(0),f=d(),h=a(0),v=a(0),x=a(),w=!1,_=e=>{u&&(w=!0,u.beginPath().moveTo(e.x,e.y))},y=e=>{u&&w&&(u.lineTo(e.x,e.y).stroke().draw(!0),u.moveTo(e.x,e.y))},b=e=>{u&&(w=!1,u.lineTo(e.x,e.y).stroke().draw(!0))};return t((()=>{uni.createSelectorQuery().in(f).select("#"+m).boundingClientRect((e=>{h.value=e.width,v.value=e.height,setTimeout((()=>{x.value.fetch().then((e=>{u=e.config({strokeStyle:"black",lineWidth:2})}))}),200)})).exec()})),c({toBase64:()=>new Promise(((e,a)=>{u?u.toDataURL().then((a=>{e(a)})):a("canvas init failed!")}))}),(e,a)=>{const t=l;return o(),s(t,{class:"draw-board-container",id:r(m)},{default:n((()=>[0!=r(h)&&0!=r(v)?(o(),s(p,{key:0,onStart:r(_),onMove:r(y),onEnd:r(b),ref_key:"canvasRef",ref:x,width:r(h),height:r(v)},null,8,["onStart","onMove","onEnd","width","height"])):i("",!0)])),_:1},8,["id"])}}}),[["__scopeId","data-v-c50cef18"]]),w=v(e({__name:"index",setup(e){let t=a(),i=()=>{t.value.toBase64().then((e=>{console.log(e)})).catch((e=>{}))};return(e,a)=>{const d=m(f("ui-draw-board"),x),p=l,v=h;return o(),s(p,{class:"example-container"},{default:n((()=>[c(p,{class:"view"},{default:n((()=>[c(d,{ref_key:"mydrawBoardRef",ref:t},null,512)])),_:1}),c(v,{class:"example-btnbottom",type:"primary",onClick:r(i)},{default:n((()=>[u(" 获取base64 ")])),_:1},8,["onClick"])])),_:1})}}}),[["__scopeId","data-v-7e644491"]]);export{w as default};
